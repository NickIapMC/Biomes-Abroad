package znick_.biomesabroad.util.manager;

import java.lang.reflect.Field;
import java.util.LinkedHashSet;
import java.util.Set;

import net.minecraft.world.biome.BiomeGenBase;
import net.minecraftforge.common.BiomeDictionary;
import net.minecraftforge.common.BiomeManager;
import znick_.biomesabroad.biome.BaseBiome;
import znick_.biomesabroad.biome.BiomesAbroadGenLayer;
import znick_.biomesabroad.biome.biomes.BiomeBase;
import znick_.biomesabroad.biome.biomes.BiomeCherryForest;
import znick_.biomesabroad.biome.biomes.BiomeOvergrownMountains;
import znick_.biomesabroad.biome.biomes.BiomePirateShores;
import znick_.biomesabroad.biome.biomes.BiomeRainbowForest;
import znick_.biomesabroad.biome.biomes.BiomeRetro;
import znick_.biomesabroad.biome.biomes.BiomeStarfield;
import znick_.biomesabroad.biome.biomes.BiomeWasteland;
import znick_.biomesabroad.biome.biomes.BiomeWinterWonderland;
import znick_.biomesabroad.biome.cartoonhills.CartoonHills;
import znick_.biomesabroad.util.helper.FieldHelper;

/**Class of static parameterless methods where all custom biomes are declared, initialized, and registered.
 * 
 * <dl>
 * <dt><strong>Static Methods</strong><dt>
 * <dd>createCustomBiomes()</dd>
 * <dd>registerBiomes()</dd>
 * <dd>createBiomes()</dd>
 * 
*/
public final class BiomesAbroadBiomes {

	public static final BaseBiome CARTOON_HILLS = new CartoonHills();
	public static BiomeBase biomeRetro;
	public static BiomeBase biomeRainbowForest;
	public static BiomeBase biomeOvergrownMountains;
	public static BiomeBase biomeWinterWonderland;
	public static BiomeBase biomePirateShores;
	public static BiomeBase biomeStarfield;
	public static BiomeBase biomeCherryForest;
	public static BiomeBase biomeWasteland;
	
	private static final Set<BaseBiome> BIOMES = new LinkedHashSet<BaseBiome>();
	
	/**
	 * Initializes custom biomes.
	 */
	public static void createCustomBiomes() throws Exception {		
		biomeWasteland = new BiomeWasteland(201);
		biomeRetro = new BiomeRetro(204);
		biomeRainbowForest = new BiomeRainbowForest(205);
		biomeOvergrownMountains = new BiomeOvergrownMountains(206);
		biomeWinterWonderland = new BiomeWinterWonderland(207);
		biomePirateShores = new BiomePirateShores(208);
		biomeStarfield = new BiomeStarfield(209);
		biomeCherryForest = new BiomeCherryForest(210);
	}
	
	public static void init() {
		try {
			for (Field field : BiomesAbroadBiomes.class.getDeclaredFields()) {
				if (field.get(null) instanceof BaseBiome) {
					BIOMES.add((BaseBiome) field.get(null));
				}
			}
		} catch(Exception e) {throw new RuntimeException(e);}
		
		for (BaseBiome biome : BIOMES) {
			BiomeDictionary.registerBiomeType(biome, biome.getType());
			BiomesAbroadGenLayer.addBiome(biome);
		}
	}
	
	/**
	 * Registers custom biomes into the game.
	 */
	public static void registerBiomes() throws Exception {
		
		FieldHelper.invokeMethodOnAllFields(BiomesAbroadBiomes.class, BiomeBase.class, BiomeManager.class.getMethod("addSpawnBiome", BiomeGenBase.class));
	}
	
	/**
	 * Calls initialization and registration functions.
	 */
	public static void createBiomes() throws Exception {
		BiomesAbroadBiomes.createCustomBiomes();
		BiomesAbroadBiomes.registerBiomes();
		BiomesAbroadBiomes.addBiomes();
	}
	
}
