package znick_.biomesabroad.biome;

import java.util.LinkedHashMap;
import java.util.Map;
import java.util.Random;

import net.minecraft.block.Block;
import net.minecraft.world.World;
import net.minecraft.world.biome.BiomeDecorator;
import net.minecraft.world.biome.BiomeGenBase;
import net.minecraft.world.gen.feature.WorldGenerator;
import net.minecraftforge.common.BiomeDictionary.Type;
import znick_.biomesabroad.generation.StructureGenerator;
import znick_.biomesabroad.generation.flower.FlowerSpaceInvader;

public class BaseBiome extends BiomeGenBase {
	
	private static int nextID = 200;
	
	private final Type type;
	private final Class<? extends BiomeDecorator> decoratorClass;
	private final Map<WorldGenerator, Float> structures = new LinkedHashMap<WorldGenerator, Float>();
	
	public BaseBiome(Class<? extends BiomeDecorator> decorator, Type type) {
		super(getNextID(), true);
		this.type = type;
		this.decoratorClass = decorator;
	}
	
	@Override
	public BiomeDecorator createBiomeDecorator() {
        try {return this.getModdedBiomeDecorator(this.decoratorClass.newInstance());}
        catch(Exception e) {throw new RuntimeException(e);}
    }
	
	public Type getType() {
		return this.type;
	}
	
	private static int getNextID() {
		return nextID++;
	}
	
	protected void setBlocks(Block top, Block fill) {
		this.topBlock = top;
		this.fillerBlock = fill;
	}
	
	@Override
	public void decorate(World world, Random rand, int chunkX, int chunkZ) {
		super.decorate(world, rand, chunkX, chunkZ);
		
		for (Map.Entry<WorldGenerator, Float> entry : this.structures.entrySet()) {
			StructureGenerator.generateStructure(world, rand, chunkX, chunkZ, this.rootHeight, entry.getKey(), entry.getValue()); 
		}
	}
	
	protected void addStructure(Block toGenerate, Block generateIn, float chance) {
		
	}
	
	protected void addStructure(WorldGenerator structure, float chance) {
		
	}

}
